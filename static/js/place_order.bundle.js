(()=>{"use strict";var e={};function t(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}(e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})})(e);var n=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.size=t,this.toppings=n}var n,a;return n=e,(a=[{key:"getTotal",value:function(){var e=0;return e+=this.size.price,this.toppings.forEach((function(t){e+=t.price})),e}},{key:"getToppingNames",value:function(){return this.toppings.map((function(e){return e.name}))}}])&&t(n.prototype,a),e}(),a=function e(t,n,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.first_name=t,this.last_name=n,this.pizzas=a};function r(e){return React.createElement("div",{id:"toppingList",class:"field is-grouped is-grouped-multiline"},e.children)}function c(e){var t=e.topping;return React.createElement("div",{class:"control"},React.createElement("div",{class:"tags has-addons"},React.createElement("span",{class:"tag"},t.name),React.createElement("span",{class:"tag is-info"},t.price.currency())))}function l(e){var t=e.message,n=e.deleteErrorMessage;return React.createElement("article",{class:"message is-danger is-small"},React.createElement("div",{class:"message-header"},React.createElement("p",null,"Error"),React.createElement("button",{onClick:function(){return n()},class:"delete","aria-label":"delete"})),React.createElement("div",{class:"message-body"},t))}function s(e){var t=e.pizza,n=e.index,a=e.removePizza;return React.createElement("li",{key:n,class:"level"},React.createElement("div",{class:"level-left"},React.createElement("div",{class:"level-item"},React.createElement("a",{class:"delete",onClick:function(){return a(n)}})),React.createElement("div",{class:"level-item has-text-centered"},React.createElement("div",null,React.createElement("p",{class:"heading"},"Pizza"),React.createElement("b",null,"No.",n+1))),React.createElement("div",{class:"level-item has-text-centered"},React.createElement("div",null,React.createElement("p",{class:"heading"},"Size"),React.createElement("p",null,t.size.name.capitalize()))),React.createElement("div",{class:"level-item"},React.createElement("div",null,React.createElement("p",{class:"heading"},"Toppings"),t.toppings.length>0?React.createElement("p",null,t.getToppingNames().join(", ")):React.createElement("p",null,"No toppings")))),React.createElement("div",{class:"level-right"},React.createElement("p",{class:"level-item"},React.createElement("b",null,"Total:")," ",t.getTotal().currency())))}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t,n,a,r,c,l){try{var s=e[c](l),i=s.value}catch(e){return void n(e)}s.done?t(i):Promise.resolve(i).then(a,r)}function u(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function p(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Number.prototype.currency=function(){return""},String.prototype.capitalize=function(){return""};var h=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(b,React.Component);var i,m,h,E,y,R,g=(y=b,R=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=v(y);if(R){var n=v(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return d(this,e)});function b(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,b),(t=g.call(this,e)).state={first_name:"",last_name:"",sizes,selected_size:sizes[0],toppings,selected_toppings:[],pizzas:[],error:{message:"",isOn:!1}},t}return i=b,(m=[{key:"size_price",value:function(){return this.state.selected_size.price}},{key:"order_total",value:function(){var e=0;return this.state.pizzas.forEach((function(t){e+=t.getTotal()})),e}},{key:"handleChange",value:function(e,t){var n={};n[t]=e.target.value,this.setState(n)}},{key:"addTopping",value:function(e){var t=this.state.toppings.find((function(t){return t.id==e}));this.setState((function(e){return{selected_toppings:[].concat(u(e.selected_toppings),[t])}}))}},{key:"removeToppingFromSelected",value:function(e){var t=Array.from(this.state.selected_toppings);t.splice(e,1),this.setState({selected_toppings:t})}},{key:"addPizza",value:function(){var e=Array.from(this.selected_toppings),t=new n(this.state.selected_size,e);this.setState((function(e){return{pizzas:[].concat(u(e.pizzas),[t])}}))}},{key:"removePizza",value:function(e){var t=Array.from(this.state.pizzas);t.splice(e,1),this.setState({pizzas:t})}},{key:"placeOrder",value:(h=regeneratorRuntime.mark((function t(n){var r,c,l,s,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.prevenDefault(),r=Array.from(this.state.pizzas),c=new a(this.state.first_name,this.state.last_name,r),t.prev=3,t.next=6,fetch("/order/",{method:"POST",mode:"same-origin",body:JSON.stringify(c),headers:{"Content-Type":"application/json","X-CSRFTOKEN":(0,e.default)("csrftoken")}});case 6:if(200==(l=t.sent).status){t.next=12;break}return t.next=10,l.text();case 10:throw s=t.sent,new Error(s);case 12:return t.next=14,l.text();case 14:i=t.sent,console.log(i),window.location.href="/order/confirm",t.next=23;break;case 19:t.prev=19,t.t0=t.catch(3),console.log(t.t0),this.setState({error:{message:t.t0,isOn:!0}});case 23:case"end":return t.stop()}}),t,this,[[3,19]])})),E=function(){var e=this,t=arguments;return new Promise((function(n,a){var r=h.apply(e,t);function c(e){o(r,n,a,c,l,"next",e)}function l(e){o(r,n,a,c,l,"throw",e)}c(void 0)}))},function(e){return E.apply(this,arguments)})},{key:"deleteErrorMessage",value:function(){this.setState({error:{isOn:!1}})}},{key:"render",value:function(){var e=this,t=this.state,n=t.first_name,a=t.last_name,i=t.selected_size,o=t.error,u=t.sizes,m=t.pizzas,p=t.toppings;return React.createElement("div",null,o.isOn&&React.createElement(l,{message:o.message,deleteErrorMessage:this.deleteErrorMessage}),React.createElement("h4",{class:"title is-4"},"Fill the data to order!"),React.createElement("hr",null),React.createElement("form",{onSubmit:function(t){return e.placeOrder(t)}},React.createElement("div",{class:"columns"},React.createElement("div",{class:"column"},React.createElement("div",{class:"field is-horizontal is-pulled-left"},React.createElement("div",{class:"field-label is-normal"},React.createElement("label",{class:"label"},"Client:")),React.createElement("div",{class:"field-body"},React.createElement("div",{class:"field"},React.createElement("p",{class:"control is-expanded"},React.createElement("input",{value:n,onChange:function(t){return e.handleChange(t,"first_name")},name:"first_name",class:"input",type:"text",placeholder:"Name",required:!0}))),React.createElement("div",{class:"field"},React.createElement("p",{class:"control is-expanded"},React.createElement("input",{value:a,onChange:function(t){return e.handleChange(t,"last_name")},name:"last_name",class:"input",type:"text",placeholder:"Last Name",required:!0}))))))),React.createElement("h4",{class:"title is-4"},"Customize your pizza"),React.createElement("hr",null),React.createElement("div",{class:"columns"},React.createElement("div",{class:"column"},React.createElement("div",{class:"field has-addons is-horizontal is-pulled-left"},React.createElement("div",{class:"field-label is-normal"},React.createElement("label",{class:"label"},"Sizes:")),React.createElement("div",{class:"field-body"},React.createElement("div",{class:"control"},React.createElement("div",{class:"select"},React.createElement("select",{class:"select",value:i,onChange:function(t){return e.handleChange(t,"selected_size")}},u.map((function(e){return React.createElement("option",{value:e},e.name.capitalize())}))))),React.createElement("div",{class:"control"},React.createElement("a",{class:"button is-static"},this.size_price().currency())))))),React.createElement("div",{class:"columns"},React.createElement("div",{class:"column"},React.createElement("h6",{class:"title is-6"},"Toppings:"),React.createElement("div",{class:"field is-grouped is-grouped-multiline"},selected_toppings.map((function(t,n){return React.createElement("div",{key:t.id,class:"control"},React.createElement("div",{class:"tags has-addons"},React.createElement("span",{class:"tag"},t.name),React.createElement("a",{onClick:function(){return e.removeToppingFromSelected(n)},class:"tag is-delete"})))})))),React.createElement("div",{class:"column"},React.createElement("h6",{class:"title is-6 has-text-centered"},"Select your toppings:"),React.createElement(r,null,p.map((function(t){return React.createElement(c,{topping:t,onClick:function(){return e.addTopping(t.id)}})}))))),React.createElement("div",{class:"field"},React.createElement("div",{class:"control"},React.createElement("button",{type:"button",onClick:function(){return e.addPizza()},class:"button"},"+Add Pizza"))),React.createElement("hr",null),React.createElement("h4",{class:"title is-4"},"Pizzas:"),m.length>0?React.createElement("ul",null,m.map((function(t,n){return React.createElement(s,{pizza:t,index:n,removePizza:e.removePizza})}))):React.createElement("div",{class:"content has-text-centered"},React.createElement("p",{class:"is-size-5 has-text-weight-light"},"There are no pizzas yet")),React.createElement("hr",null),m.length>0&&React.createElement("div",{class:"content",style:"display: flex; justify-content: space-between;"},React.createElement("input",{type:"submit",value:"Order",class:"button is-info"}),React.createElement("p",null,React.createElement("b",null,"Order total:")," ",order_total.currency()))))}}])&&p(i.prototype,m),b}(),E=document.getElementById("app");console.log("ok"),ReactDOM.render(React.createElement(h,null),E)})();